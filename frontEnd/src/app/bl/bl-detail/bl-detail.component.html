<div class="container">
  <div *ngIf="loading" class="text-center">
    <p>Chargement...</p>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    <p>Impossible de charger les détails du bon de livraison.</p>
    <p>Veuillez vérifier que vous êtes connecté et que vous disposez des autorisations nécessaires.</p>
  </div>

  <div *ngIf="!loading && !error && bl">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Bon de Livraison: {{bl.id_bl}}</h2>
      <div>
        <button class="btn btn-primary mr-2" [routerLink]="['/bl', bl.id_bl, 'edit']">Modifier</button>
        <button class="btn btn-danger" (click)="onDelete()">Supprimer</button>
      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Numéro BL:</div>
          <div class="col-md-9">{{bl.id_bl}}</div>
        </div>
        
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Article:</div>
          <div class="col-md-9">{{bl.article.nom}}</div>
        </div>
        
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Client:</div>
          <div class="col-md-9">{{bl.client.nom}}</div>
        </div>
        
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Camion:</div>
          <div class="col-md-9">{{bl.camion ? bl.camion.matricule : 'Non assigné'}}</div>
        </div>
        
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Quantité:</div>
          <div class="col-md-9">{{bl.quantite}}</div>
        </div>
        
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Statut:</div>
          <div class="col-md-9">
            <span [ngClass]="{
              'badge bg-warning': bl.statut === 'en_attente',
              'badge bg-primary': bl.statut === 'en_cours',
              'badge bg-success': bl.statut === 'termine',
              'badge bg-danger': bl.statut === 'annule'
            }">
              {{getStatusLabel(bl.statut)}}
            </span>
          </div>
        </div>
        
        <div class="row mb-2">
          <div class="col-md-3 font-weight-bold">Date:</div>
          <div class="col-md-9">{{bl.date_bl | date:'dd/MM/yyyy HH:mm'}}</div>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <button class="btn btn-secondary" routerLink="/bl">Retour à la liste</button>
    </div>
  </div>
</div>